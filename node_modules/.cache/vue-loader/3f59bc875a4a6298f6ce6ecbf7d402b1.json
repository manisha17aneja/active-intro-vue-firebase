{"remainingRequest":"/var/www/html/active-intro/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/active-intro/src/components/common/Subscription.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/active-intro/src/components/common/Subscription.vue","mtime":1630414393732},{"path":"/var/www/html/active-intro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/active-intro/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/active-intro/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/var/www/html/active-intro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/active-intro/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgeyBkYiB9IGZyb20gJy4uLy4uL21haW4nCiAgICAKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6ewogICAKfSwKZGF0YSgpewogICAgcmV0dXJuewogICAgICAgIHN1YnNjcmlwdGlvbnM6IFtdLAogICAgICAgIGNhdGVnb3J5OiAnJywKICAgICAgICBjb21wb25lbnRzOnt9LAogICAgICAgIHNpZDonJywKICAgICAgICBjYXJ0OiBmYWxzZSwKICAgICAgICByYW5kb21faWQ6IiIsCiAgICAgICAgc2x1ZzoiIiwKICAgIH0KICB9LAoKICBjcmVhdGVkOiBmdW5jdGlvbigpCiAgewogICAgICB0aGlzLmZldGNoSXRlbXMoKTsKICB9LAogICB3YXRjaDogewoKICAgICAgLy8gV2F0Y2ggZm9yIHJvdXRlIGNoYW5nZXMKICAgICAgJHJvdXRlKHJvdXRlKSB7CiAgICAgICAgY29uc29sZS5sb2cocm91dGUucGFyYW1zLnNsdWcpOwogICAgICAgIAogICAgICAgdGhpcy5mZXRjaEl0ZW1zKCk7CgogICAgICB9LAogICAgfSwKCiAgbWV0aG9kczogewoKICAgIGFzeW5jIHN1Ym1pdChzaWQsIGFtb3VudCkgewoKICAgICAgdmFyIHVpZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VyU2Vzc2lvbklkIik7CiAgICAgIHZhciByYW5kb21JZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJyYW5kb21JZCIpOwoKICAgICAgdGhpcy5zaWQgPSBzaWQ7CiAgICAgIHRoaXMuYW1vdW50ID0gYW1vdW50OwogICAgICAKICAgICAgZnVuY3Rpb24gbWFrZWlkKGxlbmd0aCkgewogICAgICAgIHZhciByZXN1bHQgICAgICAgICAgID0gW107CiAgICAgICAgdmFyIGNoYXJhY3RlcnMgICAgICAgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVowMTIzNDU2Nzg5JzsKICAgICAgICB2YXIgY2hhcmFjdGVyc0xlbmd0aCA9IGNoYXJhY3RlcnMubGVuZ3RoOwogICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrICkgewogICAgICAgICAgcmVzdWx0LnB1c2goY2hhcmFjdGVycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcmFjdGVyc0xlbmd0aCkpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdC5qb2luKCcnKTsKICAgICAgfQogICAgICAKICAgICAgaWYodWlkID09IG51bGwgJiYgcmFuZG9tSWQgPT0gbnVsbCl7CgogICAgICAgICAgY29uc29sZS5sb2coJ25vIGJvdGggJyk7CgogICAgICAgICAgdGhpcy5yYW5kb21faWQgPSBtYWtlaWQoMTApOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInJhbmRvbUlkIiwgdGhpcy5yYW5kb21faWQpOwogICAgICAgICAgdGhpcy5xdWVyeSA9IGRiLmNvbGxlY3Rpb24oImNhcnQiKS53aGVyZSgicmFuZG9tX2lkIiwgIj09IiwgdGhpcy5yYW5kb21faWQpLndoZXJlKCJzdWJzY3JpcHRpb24iLCAiPT0iLCB0aGlzLnNpZCk7CgogICAgICB9IGVsc2UgaWYodWlkID09IG51bGwgJiYgcmFuZG9tSWQgIT0gbnVsbCl7CgogICAgICAgICAgY29uc29sZS5sb2coJ25vIHVpZCAnKTsKCiAgICAgICAgICB0aGlzLnJhbmRvbV9pZCA9IHJhbmRvbUlkOwogICAgICAgICAgdGhpcy5xdWVyeSA9IGRiLmNvbGxlY3Rpb24oImNhcnQiKS53aGVyZSgicmFuZG9tX2lkIiwgIj09IiwgdGhpcy5yYW5kb21faWQpLndoZXJlKCJzdWJzY3JpcHRpb24iLCAiPT0iLCB0aGlzLnNpZCk7CgogICAgICB9IGVsc2UgaWYodWlkICE9IG51bGwgJiYgcmFuZG9tSWQgIT0gbnVsbCl7CiAgICAgIAogICAgICAgICAgY29uc29sZS5sb2coJyBib3RoICcpOwoKICAgICAgICAgIHRoaXMucmFuZG9tX2lkID0gcmFuZG9tSWQ7CiAgICAgICAgICB0aGlzLnF1ZXJ5ID0gZGIuY29sbGVjdGlvbigiY2FydCIpLndoZXJlKCJ1aWQiLCAiPT0iLCB1aWQpLndoZXJlKCJzdWJzY3JpcHRpb24iLCAiPT0iLCB0aGlzLnNpZCk7CiAgICAgICAgCiAgICAgIH1lbHNlewoKICAgICAgICAgIGNvbnNvbGUubG9nKCdubyByYW5kaWQgJyk7CgogICAgICAgICAgdGhpcy5yYW5kb21faWQgPSBtYWtlaWQoMTApOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInJhbmRvbUlkIiwgdGhpcy5yYW5kb21faWQpOwogICAgICAgICAgdGhpcy5xdWVyeSA9IGRiLmNvbGxlY3Rpb24oImNhcnQiKS53aGVyZSgidWlkIiwgIj09IiwgdWlkKS53aGVyZSgic3Vic2NyaXB0aW9uIiwgIj09IiwgdGhpcy5zaWQpOwoKICAgICAgfQoKICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCB0aGlzLnF1ZXJ5LmdldCgpOwogICAgICBjb25zdCBjb3VudCA9IHNuYXBzaG90LnNpemU7CiAgICAgIGNvbnNvbGUubG9nKGNvdW50KTsKCiAgICAgIGlmKGNvdW50IDw9IDApewoKICAgICAgICB0aGlzLmNhcnQgPSB0cnVlOwoKICAgICAgICB2YXIgIGRhdGUgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCk7CgogICAgICAgIGRiLmNvbGxlY3Rpb24oImNhcnQiKQogICAgICAgIC5hZGQoeyAKICAgICAgICAgICAgYW1vdW50OnRoaXMuYW1vdW50LAogICAgICAgICAgICBzdWJzY3JpcHRpb246IHRoaXMuc2lkLAogICAgICAgICAgICB1aWQ6IHVpZCwKICAgICAgICAgICAgcmFuZG9tX2lkOiB0aGlzLnJhbmRvbV9pZCwKICAgICAgICAgICAgY3JlYXRlZDogZGF0ZSwKICAgICAgICAgICAgbW9kaWZpZWQ6IGRhdGUsCiAgICAgICAgfSkKICAgICAgICAudGhlbigoZG9jKSA9PiB7CgogICAgICAgICAgICBkYi5jb2xsZWN0aW9uKCJjb21wYW5pZXMiKS5kb2MoZG9jLmlkKS51cGRhdGUoeyBjaWQ6IGRvYy5pZCB9KTsKCiAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuc3VjY2VzcygnU3VjY2VzcywgQWRkZWQgU3VjY2Vzc2Z1bGx5IScsIHsKICAgICAgICAgICAgICAgIGljb24gOiAnY2hlY2snLAogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2NhcnQnKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3Igd3JpdGluZyBkb2N1bWVudDogIiwgZXJyb3IpOwogICAgICAgIH0pOyAKCiAgICAgICAgCiAgICAgIH1lbHNlewogICAgICAgIHRoaXMuJHRvYXN0ZWQuZXJyb3IoJ0Vycm9yLCBBbHJlYWR5IEFkZGVkIScsIHsKICAgICAgICAgIC8vaWNvbiA6ICdjaGVjaycsCiAgICAgICAgICBpY29uIDogJ2Vycm9yX291dGxpbmUnCiAgICAgIH0pCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvY2FydCcpOwogICAgICB9CiAgICAgIAogICAgfSwKCiAgICBmZXRjaEl0ZW1zKCkKICAgIHsKCiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdOwogICAgICB0aGlzLnNsdWcgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuc2x1ZzsKCiAgICAgIGRiLmNvbGxlY3Rpb24oImNvdW50cmllcyIpCiAgICAgIC53aGVyZSgic2x1ZyIsICI9PSIsIHRoaXMuc2x1ZykKICAgICAgLmdldCgpCiAgICAgIC50aGVuKChxdWVyeVNuYXBzaG90KSA9PiB7CiAgICAgICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKChkb2NzKSA9PiB7CgogICAgICAgICAgZGIuY29sbGVjdGlvbigic3Vic2NyaXB0aW9ucyIpCiAgICAgICAgICAud2hlcmUoImNvdW50cnkiLCAiPT0iLCBkb2NzLmlkKQogICAgICAgICAgLmdldCgpCiAgICAgICAgICAudGhlbigocXVlcnlTbmFwc2hvdCkgPT4gewogICAgICAgICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goKGRvYykgPT4gewoKICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkb2MuaWQsICIgPT4gIiwgZG9jLmRhdGEoKSk7CiAgICAgICAgCiAgICAgICAgICAgICAgdmFyIGRpc2NvdW50UHJpY2UgPSBkb2MuZGF0YSgpLnByaWNlIC0gZG9jLmRhdGEoKS5wcmljZSAqIGRvYy5kYXRhKCkuZGlzY291bnQvMTAwOwogICAgICAgICAgICAgIHZhciB2YXQgPSBkaXNjb3VudFByaWNlICsgZGlzY291bnRQcmljZSAqIGRvYy5kYXRhKCkudmF0LzEwMDsKCiAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goewogICAgICAgICAgICAgICAgaWQ6IGRvYy5pZCwKICAgICAgICAgICAgICAgIHRpdGxlOiBkb2MuZGF0YSgpLnRpdGxlLAogICAgICAgICAgICAgICAgdGFnX2xpbmU6IGRvYy5kYXRhKCkudGFnX2xpbmUsCiAgICAgICAgICAgICAgICB0YWdzOiBkb2MuZGF0YSgpLnRhZywKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkb2MuZGF0YSgpLmRlc2NyaXB0aW9uLAogICAgICAgICAgICAgICAgaW1hZ2U6IGRvYy5kYXRhKCkuaW1hZ2UsCiAgICAgICAgICAgICAgICBwcmljZTogZG9jLmRhdGEoKS5wcmljZSwKICAgICAgICAgICAgICAgIGRpc2NvdW50OiBkb2MuZGF0YSgpLmRpc2NvdW50LAogICAgICAgICAgICAgICAgZGlzY291bnRQcmljZTogZGlzY291bnRQcmljZSwKICAgICAgICAgICAgICAgIHZhdDogdmF0LAogICAgICAgICAgICAgICAgY3JlYXRlZDogZG9jLmRhdGEoKS5jcmVhdGVkLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJFcnJvciBnZXR0aW5nIGRvY3VtZW50czogIiwgZXJyb3IpOwogICAgICAgICAgfSk7CgogICAgICAgIH0pOwogICAgICB9KTsKCgogICAgICBkYi5jb2xsZWN0aW9uKCJjb21wb25lbnRzIikuZG9jKCdubFhjSFl6VmtxRGFXR0pnaXhqRicpCiAgICAgIC5nZXQoKQogICAgICAudGhlbigoZG9jKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnRzID0gZG9jLmRhdGEoKTsKICAgICAgfSkKICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coIkVycm9yIGdldHRpbmcgZG9jdW1lbnRzOiAiLCBlcnJvcik7CiAgICAgIH0pOwoKCiAgICB9CiAgfQp9CiAgCg=="},{"version":3,"sources":["Subscription.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkIA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA","file":"Subscription.vue","sourceRoot":"src/components/common","sourcesContent":["<template>\n<!-- Main Start -->\n<section id=\"entProductSection\" class=\"service-section bg-default-4 pt-15 pb-13 py-lg-20 home_products\">\n          <div class=\"container\">\n            <div class=\"row\">\n              <div class=\"col-12 text-center\">\n                <h2 class=\"sec-title gr-text-4 mb-10\">\n                {{ components.title }}\n                </h2>\n              </div>\n            </div>\n            <div class=\"row justify-content-center position-relative gr-z-index-1\">\n\n              <div class=\"col-md-4\" v-for=\"subscription in subscriptions\" :key=\"subscription.id\">\n                                  <div class=\"product_details\">\n                           <router-link :to=\"{ path: '/subscriptions/'+ subscription.id}\" onclick=\"showLoader()\" class=\"d-block\" tabindex=\"0\"></router-link>\n                          <div class=\"top-content\">\n                          <router-link :to=\"{ path: '/subscriptions/'+ subscription.id}\" onclick=\"showLoader()\" class=\"d-block\" tabindex=\"0\">\n                              <div class=\"product_img\">\n                                <img data-src=\"https://etsitecdn.theentertainerme.com/gallery/product2021/DXB+Classic-Product+d.png\" alt=\"Dubai Classic 2021\" class=\"img-fluid lazyloaded\" :src=\"subscription.image\">\n                              </div>\n                              </router-link>\n                            <router-link :to=\"{ path: '/subscriptions/'+ subscription.id}\" tabindex=\"0\">\n                              <div class=\"product_details_inner d-flex flex-column justify-content-center\">\n                                <h2 class=\"product_name m-0\">{{ subscription.title }}</h2><small class=\"short_desc\">{{ subscription.tag_line }}</small>\n                                <div class=\"product_price\">\n                                  <div class=\"tag-wrap\">\n                                    <span class=\"badge_transparent d-inline-flex align-items-center justify-content-center\">\n                                      Special Offer</span>\n                                  </div>\n                                  <span class=\"strike\"><span class=\"before_price\">AED {{ subscription.price }}</span></span>\n                                  <span class=\"percentage_off ml-1\"> {{ subscription.discount }} % Off </span>\n                                  <h3 class=\"after_price\">\n                                    AED {{ subscription.discountPrice }}\n                                    \n                                    <span class=\"vat_info\">*AED {{ subscription.vat }} including VAT</span>\n                                  </h3>\n                                </div>\n                              </div>\n                              </router-link>\n                           <!-- <div data-type=\"product\" data-amount=\"25725\" data-currency=\"AED\" data-num-instalments=\"3\" class=\"postpay-widget\">\n                              <div class=\"postpay-product-widget-container postpay-locale-en light\">\n                                <div class=\"postpay-product-widget-text\">\n                                  Or 3 interest-free instalments every month of\n                                  <div class=\"postpay-product-price-wrapper\">\n                                    <span class=\"postpay-pay-later-item-currency\">AED</span>\n                                    <span class=\"postpay-product-price\"> 85.75 </span>\n                                  </div>\n                                  with\n                                  <a href=\"https://postpay.io\" target=\"_blank\" class=\"postpay-brand postpay-link\">postpay\n                                    <svg width=\"10\" height=\"10\" enable-background=\"new 0 0 27.964 27.964\" viewBox=\"0 0 27.964 27.964\" xmlns=\"http://www.w3.org/2000/svg\">\n                                      <path d=\"m13.982.001c-7.723 0-13.982 6.258-13.982 13.983 0 7.721 6.259 13.98 13.982 13.98 7.722 0 13.982-6.26 13.982-13.98.001-7.725-6.26-13.983-13.982-13.983zm0 26.532c-6.933 0-12.551-5.619-12.551-12.549 0-6.935 5.618-12.552 12.551-12.552 6.931 0 12.55 5.617 12.55 12.552 0 6.93-5.619 12.549-12.55 12.549z\"></path>\n                                      <path d=\"m12.004 10.551h3.931v12.649h-3.931z\"></path>\n                                      <path d=\"m13.995 5.072c-1.265 0-2.095.852-2.095 1.963 0 1.087.802 1.964 2.044 1.964 1.317 0 2.119-.877 2.119-1.964-.026-1.111-.801-1.963-2.068-1.963z\"></path>\n                                    </svg>\n                                  </a>\n                                </div>\n                              </div>\n                            </div>\n                            <p class=\"become-member prospect-user\">\n                              Get Cheers, Body, Fitness &amp; Adrenaline for an extra\n                              <span class=\"inline-link\">AED 95</span>\n                            </p>-->\n                          </div>\n                          <div class=\"bottom-content\">\n                            <div class=\"d-flex\">\n                              \n                              <ul class=\"product_features list-unstyled d-flex flex-wrap flex-column p-0\">\n                                <li  v-for=\"tag in subscription.tags\" :key=\"tag.value\">\n                                  <span class=\"text d-block\">{{ tag.value }}</span>\n                                </li>\n                              </ul>\n                            </div>\n                            <button type=\"submit\" v-on:click=\"submit(subscription.id, subscription.vat,)\" class=\"btn btn-primary subscribe_btn btn-with-link\">Buy Now</button>\n                           \n                            <div class=\"btn_bottom\">\n                            <router-link :to=\"{ path: '/subscriptions/'+ subscription.id}\" class=\"d-inline-block\" tabindex=\"0\">Tell me more</router-link>\n                            </div>\n                          </div>\n                        </div>\n              </div>\n\n\n        \n            </div>\n          </div>\n          <div tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\" class=\"modal fade upsellmodal\">\n            <div role=\"document\" class=\"modal-dialog modal-dialog-centered\">\n              <div class=\"modal-content\">\n                <div class=\"modal-header modal-header-top p-0\">\n                  <button type=\"button\" data-dismiss=\"modal\" aria-label=\"Close\" class=\"close\">\n                    <span aria-hidden=\"true\">×</span>\n                  </button>\n                </div>\n                <!---->\n              </div>\n            </div>\n          </div>\n          <div tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\" class=\"modal fade genericModalConsent separateProduct\">\n            <div role=\"document\" class=\"modal-dialog modal-dialog-centered\">\n              <div class=\"modal-content\">\n                <div class=\"modal-header modal-header-top p-0\">\n                  <button type=\"button\" data-dismiss=\"modal\" aria-label=\"Close\" class=\"close\">\n                    <span aria-hidden=\"true\">×</span>\n                  </button>\n                </div>\n                <div class=\"modal-body text-center\">\n                  <p>\n                    You already have products in your basket. Do you wish to remove\n                    these and start a new order ?\n                  </p>\n                  <div class=\"d-flex\">\n                    <!---->\n                    <a href=\"&amp;cartRefresh=1\" class=\"btn cheersCntBtn subscribe_btn\">Yes</a>\n                    <a href=\"javascript:void(0);\" data-dismiss=\"modal\" class=\"btn cheersCntBtn subscribe_btn\">No</a>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <button data-toggle=\"modal\" data-target=\".upsellmodal\" data-keyboard=\"false\" data-backdrop=\"static\" class=\"tempUpsellBtn\" style=\"display: none\"></button>\n          <button data-toggle=\"modal\" data-target=\".separateProduct\" data-keyboard=\"false\" data-backdrop=\"static\" class=\"tempSeparateBtn\" style=\"display: none\"></button>\n    </section>\n\n<!-- Main End -->\n</template>\n\n\n<script>\n\nimport { db } from '../../main'\n    \nexport default {\n  components:{\n   \n},\ndata(){\n    return{\n        subscriptions: [],\n        category: '',\n        components:{},\n        sid:'',\n        cart: false,\n        random_id:\"\",\n        slug:\"\",\n    }\n  },\n\n  created: function()\n  {\n      this.fetchItems();\n  },\n   watch: {\n\n      // Watch for route changes\n      $route(route) {\n        console.log(route.params.slug);\n        \n       this.fetchItems();\n\n      },\n    },\n\n  methods: {\n\n    async submit(sid, amount) {\n\n      var uid = localStorage.getItem(\"userSessionId\");\n      var randomId = localStorage.getItem(\"randomId\");\n\n      this.sid = sid;\n      this.amount = amount;\n      \n      function makeid(length) {\n        var result           = [];\n        var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n        var charactersLength = characters.length;\n        for ( var i = 0; i < length; i++ ) {\n          result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));\n        }\n        return result.join('');\n      }\n      \n      if(uid == null && randomId == null){\n\n          console.log('no both ');\n\n          this.random_id = makeid(10);\n          localStorage.setItem(\"randomId\", this.random_id);\n          this.query = db.collection(\"cart\").where(\"random_id\", \"==\", this.random_id).where(\"subscription\", \"==\", this.sid);\n\n      } else if(uid == null && randomId != null){\n\n          console.log('no uid ');\n\n          this.random_id = randomId;\n          this.query = db.collection(\"cart\").where(\"random_id\", \"==\", this.random_id).where(\"subscription\", \"==\", this.sid);\n\n      } else if(uid != null && randomId != null){\n      \n          console.log(' both ');\n\n          this.random_id = randomId;\n          this.query = db.collection(\"cart\").where(\"uid\", \"==\", uid).where(\"subscription\", \"==\", this.sid);\n        \n      }else{\n\n          console.log('no randid ');\n\n          this.random_id = makeid(10);\n          localStorage.setItem(\"randomId\", this.random_id);\n          this.query = db.collection(\"cart\").where(\"uid\", \"==\", uid).where(\"subscription\", \"==\", this.sid);\n\n      }\n\n      const snapshot = await this.query.get();\n      const count = snapshot.size;\n      console.log(count);\n\n      if(count <= 0){\n\n        this.cart = true;\n\n        var  date = new Date().toLocaleString();\n\n        db.collection(\"cart\")\n        .add({ \n            amount:this.amount,\n            subscription: this.sid,\n            uid: uid,\n            random_id: this.random_id,\n            created: date,\n            modified: date,\n        })\n        .then((doc) => {\n\n            db.collection(\"companies\").doc(doc.id).update({ cid: doc.id });\n\n            this.$toasted.success('Success, Added Successfully!', {\n                icon : 'check',\n            })\n            this.$router.push('/cart');\n        })\n        .catch((error) => {\n            console.error(\"Error writing document: \", error);\n        }); \n\n        \n      }else{\n        this.$toasted.error('Error, Already Added!', {\n          //icon : 'check',\n          icon : 'error_outline'\n      })\n      this.$router.push('/cart');\n      }\n      \n    },\n\n    fetchItems()\n    {\n\n      this.subscriptions = [];\n      this.slug = this.$route.params.slug;\n\n      db.collection(\"countries\")\n      .where(\"slug\", \"==\", this.slug)\n      .get()\n      .then((querySnapshot) => {\n        querySnapshot.forEach((docs) => {\n\n          db.collection(\"subscriptions\")\n          .where(\"country\", \"==\", docs.id)\n          .get()\n          .then((querySnapshot) => {\n            querySnapshot.forEach((doc) => {\n\n              // console.log(doc.id, \" => \", doc.data());\n        \n              var discountPrice = doc.data().price - doc.data().price * doc.data().discount/100;\n              var vat = discountPrice + discountPrice * doc.data().vat/100;\n\n              this.subscriptions.push({\n                id: doc.id,\n                title: doc.data().title,\n                tag_line: doc.data().tag_line,\n                tags: doc.data().tag,\n                description: doc.data().description,\n                image: doc.data().image,\n                price: doc.data().price,\n                discount: doc.data().discount,\n                discountPrice: discountPrice,\n                vat: vat,\n                created: doc.data().created,\n              });\n            });\n          })\n          .catch((error) => {\n            console.log(\"Error getting documents: \", error);\n          });\n\n        });\n      });\n\n\n      db.collection(\"components\").doc('nlXcHYzVkqDaWGJgixjF')\n      .get()\n      .then((doc) => {\n              this.components = doc.data();\n      })\n      .catch((error) => {\n          console.log(\"Error getting documents: \", error);\n      });\n\n\n    }\n  }\n}\n  \n</script>\n\n\n"]}]}