{"remainingRequest":"/var/www/html/per/fortec/active-intro01-09-2021/active-intro/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/per/fortec/active-intro01-09-2021/active-intro/src/components/success.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/per/fortec/active-intro01-09-2021/active-intro/src/components/success.vue","mtime":1623670316000},{"path":"/var/www/html/per/fortec/active-intro01-09-2021/active-intro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/per/fortec/active-intro01-09-2021/active-intro/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/var/www/html/per/fortec/active-intro01-09-2021/active-intro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/per/fortec/active-intro01-09-2021/active-intro/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIZWFkZXIgZnJvbSAiLi9Gcm9udC1IZWFkZXIiOwppbXBvcnQgRm9vdGVyIGZyb20gIi4vRnJvbnQtRm9vdGVyIjsKaW1wb3J0IExvYWRlciBmcm9tICcuL0xvYWRlcic7CmltcG9ydCB7IGRiIH0gZnJvbSAiLi4vbWFpbiI7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgIkZyb250LUhlYWRlciI6IEhlYWRlciwKICAgICJGcm9udC1Gb290ZXIiOiBGb290ZXIsCiAgICAnTG9hZGVyJzpMb2FkZXIsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGFnZXM6IHt9LAogICAgICB0b3RhbF9hbW91bnQ6MCwKICAgIH07CiAgfSwKCiAgY3JlYXRlZDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLmZldGNoUGFnZXMoKTsKICAgIHRoaXMuc2F2ZU9yZGVyKCk7CiAgfSwKCiAgbWV0aG9kczogewogICAgZmV0Y2hQYWdlcygpIHsKICAgICAgZGIuY29sbGVjdGlvbigicGFnZXMiKQogICAgICAgIC5kb2MoIjFSbHpZcUd2VEpkaTEwU1VOaUR2IikKICAgICAgICAuZ2V0KCkKICAgICAgICAudGhlbigoZG9jKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZygiaGhoaDg4Iik7CiAgICAgICAgICBjb25zb2xlLmxvZyhkb2MuaWQsICIgPT4gIiwgZG9jLmRhdGEoKSk7CiAgICAgICAgICB0aGlzLnBhZ2VzID0gZG9jLmRhdGEoKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJFcnJvciBnZXR0aW5nIGRvY3VtZW50czogIiwgZXJyb3IpOwogICAgICAgIH0pOwogICAgfSwKCiAgICBzYXZlT3JkZXIoKSB7CgogICAgICB2YXIgdWlkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJTZXNzaW9uSWQiKTsKICAgICAgdmFyICBkYXRlID0gbmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygpOwoKICAgICAgZGIuY29sbGVjdGlvbigib3JkZXJzIikKICAgICAgLmFkZCh7IAogICAgICAgICAgCiAgICAgICAgICB1aWQ6IHVpZCwKICAgICAgICAgIGNyZWF0ZWQ6IGRhdGUsCiAgICAgICAgICBtb2RpZmllZDogZGF0ZSwKICAgICAgfSkKICAgICAgLnRoZW4oKGRvYykgPT4gewoKICAgICAgICAKCiAgICAgICAgZGIuY29sbGVjdGlvbigiY2FydCIpCiAgICAgICAgLndoZXJlKCJ1aWQiLCAiPT0iLCB1aWQpCiAgICAgICAgLmdldCgpCiAgICAgICAgLnRoZW4oKHF1ZXJ5U25hcHNob3QpID0+IHsKCiAgICAgICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goKHJlcykgPT4gewoKICAgICAgICAgICAgZGIuY29sbGVjdGlvbigib3JkZXJfZGV0YWlscyIpCiAgICAgICAgICAgIC5hZGQoeyAKICAgICAgICAgICAgICBzdWJzY3JpcHRpb246IHJlcy5kYXRhKCkuc3Vic2NyaXB0aW9uLAogICAgICAgICAgICAgIHVpZDogcmVzLmRhdGEoKS51aWQsCiAgICAgICAgICAgICAgb3JkZXJfaWQ6IGRvYy5pZCwKICAgICAgICAgICAgICBjcmVhdGVkOiBkYXRlLAogICAgICAgICAgICAgIG1vZGlmaWVkOiBkYXRlLAogICAgICAgICAgICB9KQogICAgICAgICAgICAudGhlbigoZG9jcykgPT4gewogICAgICAgICAgICAgIC8vYWxlcnQoJ2RvbmUnKTsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkb2NzKTsKICAgICAgICAgICAgICBkYi5jb2xsZWN0aW9uKCJjYXJ0IikuZG9jKHJlcy5pZCkuZGVsZXRlKCk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIHdyaXRpbmcgZG9jdW1lbnQ6ICIsIGVycm9yKTsKICAgICAgICAgICAgfSk7IAoKICAgICAgICAgICAgLy90aGlzLnRvdGFsX2Ftb3VudCA9IHBhcnNlRmxvYXQodGhpcy50b3RhbF9hbW91bnQpICsgcGFyc2VGbG9hdChyZXMuZGF0YSgpLmFtb3VudCk7CiAgICAgICAgICAgIHRoaXMudG90YWxfYW1vdW50ID0gdGhpcy50b3RhbF9hbW91bnQgKyByZXMuZGF0YSgpLmFtb3VudDsKICAgICAgICAgICAgCgogICAgICAgICAgfSk7CiAgICAgICAgIC8vIGFsZXJ0KHRoaXMudG90YWxfYW1vdW50KTsKICAgICAgICAgIGRiLmNvbGxlY3Rpb24oIm9yZGVycyIpLmRvYyhkb2MuaWQpLnVwZGF0ZSh7IHRvdGFsX2Ftb3VudDogdGhpcy50b3RhbF9hbW91bnQgfSk7CiAgICAgICAgICAKICAgICAgICB9KTsgCiAgICAgICAgCiAgICAgICAgCgogICAgICB9KQogICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3Igd3JpdGluZyBkb2N1bWVudDogIiwgZXJyb3IpOwogICAgICB9KTsgCiAgICAKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["success.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"success.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <body>\n  <!-- preloader -->\n<Loader> </Loader>\n<!-- preloader -->\n\n    <div class=\"frame\">\n      <div class=\"site-wrapper overflow-hidden\">\n        <!-- Header Section -->\n        <Front-Header> </Front-Header>\n\n        <!-- Main Start-->\n        <section class=\"success__section\">\n          <div class=\"container\">\n            <div class=\"row\">\n              <!--<div class=\"col-md-12 head\">\n                <h2>Payment conformation</h2>\n              </div>-->\n              <div class=\"col-md-12 body\">\n                <div class=\"payment\">\n                  <img\n                    src=\"./../assets/front/image/payment-success.jpg\"\n                    alt=\"imgage\"\n                  />\n                  <h6 class=\"payment-success-heading\">Payment Successful</h6>\n                </div>\n              </div>\n              <div class=\"col-md-12 footer\">\n                <h6>\n                  Thank you for your payment\n                </h6>\n                <router-link to=\"/\" class=\"btn btn-primary\"\n                  >Back to home</router-link\n                >\n              </div>\n            </div>\n          </div>\n        </section>\n        <!-- Main End-->\n\n        <!-- Footer Section -->\n        <Front-Footer> </Front-Footer>\n      </div>\n    </div>\n  </body>\n</template>\n\n<script>\nimport Header from \"./Front-Header\";\nimport Footer from \"./Front-Footer\";\nimport Loader from './Loader';\nimport { db } from \"../main\";\n\nexport default {\n  components: {\n    \"Front-Header\": Header,\n    \"Front-Footer\": Footer,\n    'Loader':Loader,\n  },\n  data() {\n    return {\n      pages: {},\n      total_amount:0,\n    };\n  },\n\n  created: function() {\n    this.fetchPages();\n    this.saveOrder();\n  },\n\n  methods: {\n    fetchPages() {\n      db.collection(\"pages\")\n        .doc(\"1RlzYqGvTJdi10SUNiDv\")\n        .get()\n        .then((doc) => {\n          console.log(\"hhhh88\");\n          console.log(doc.id, \" => \", doc.data());\n          this.pages = doc.data();\n        })\n        .catch((error) => {\n          console.log(\"Error getting documents: \", error);\n        });\n    },\n\n    saveOrder() {\n\n      var uid = localStorage.getItem(\"userSessionId\");\n      var  date = new Date().toLocaleString();\n\n      db.collection(\"orders\")\n      .add({ \n          \n          uid: uid,\n          created: date,\n          modified: date,\n      })\n      .then((doc) => {\n\n        \n\n        db.collection(\"cart\")\n        .where(\"uid\", \"==\", uid)\n        .get()\n        .then((querySnapshot) => {\n\n          querySnapshot.forEach((res) => {\n\n            db.collection(\"order_details\")\n            .add({ \n              subscription: res.data().subscription,\n              uid: res.data().uid,\n              order_id: doc.id,\n              created: date,\n              modified: date,\n            })\n            .then((docs) => {\n              //alert('done');\n              console.log(docs);\n              db.collection(\"cart\").doc(res.id).delete();\n            })\n            .catch((error) => {\n                console.error(\"Error writing document: \", error);\n            }); \n\n            //this.total_amount = parseFloat(this.total_amount) + parseFloat(res.data().amount);\n            this.total_amount = this.total_amount + res.data().amount;\n            \n\n          });\n         // alert(this.total_amount);\n          db.collection(\"orders\").doc(doc.id).update({ total_amount: this.total_amount });\n          \n        }); \n        \n        \n\n      })\n      .catch((error) => {\n        console.error(\"Error writing document: \", error);\n      }); \n    \n    },\n  },\n};\n</script>\n"]}]}